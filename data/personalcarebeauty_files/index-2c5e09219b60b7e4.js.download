(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{75557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(23843)}])},309:function(e,t,n){"use strict";var a=n(85893),r=n(67294),s=n(45697),o=n.n(s),i=n(2523),l=n(12750);function RenderWidgets(e){return(0,a.jsx)(a.Fragment,{children:(()=>{let{agent:t,user:n,userType:s,widgets:o=[],isAddon:u,isTopup:c}=e;return o.map((e,o)=>{let{meta:d={},content:g={}}=e,{template:m=""}=d;switch(m){case i.wY.BANNERS_SLIDER:return(0,a.jsx)(r.Fragment,{children:(0,a.jsx)(l.gY,{agent:t,content:g})},o);case i.wY.ANNOUNCEMENT:return(0,a.jsx)(l.I7,{isAddon:u,isTopup:c,meta:d,user:n,content:g},o);case i.wY.PRICING_BANNER_WIDGET:if(Object.keys(null==g?void 0:g.data).length)return(0,a.jsx)(l.Yb,{agent:t,content:g,meta:d},o);return null;case i.wY.BANNERS_HORIZONTAL:if(Object.keys(g.data).length)return(0,a.jsx)(l.YA,{agent:t,meta:d,content:g},o);return[];case i.wY.MULTI_BANNER:if(Object.keys(null==g?void 0:g.data).length)return(0,a.jsx)(l.MX,{agent:t,content:g,meta:d},o);return null;case i.wY.PRODUCT_LIST:if(Object.keys(g.data).length)return(0,a.jsx)(l.xy,{agent:t,content:g,meta:d},o);return[];case i.wY.RECENT_PURCHASES:return(0,a.jsx)(l.sO,{agent:t,user:n,meta:d,content:g},o);case i.wY.BANNERS_ROW:if(Object.keys(g.data).length)return(0,a.jsx)(r.Fragment,{children:(0,a.jsx)(l.jL,{agent:t,meta:d,content:g},o)},o);return[];case i.wY.BANNERS_COLUMN:if(Object.keys(g.data).length)return(0,a.jsx)(l.jL,{agent:t,meta:d,content:g},o);return[];case i.wY.CATEGORY:return(0,a.jsx)(l.Ue,{content:g,meta:d},o);case i.wY.CURATED_RAILS:if(Object.keys(g.data).length)return(0,a.jsx)(l.Cp,{content:g,type:null==d?void 0:d.type,agent:t,meta:d},o);return[];case i.wY.CONTENT_CARD:if(Object.keys(g.data).length)return(0,a.jsx)(l.uW,{content:g,meta:d,agent:t},o);return[];case i.wY.PERSONALIZED:case i.wY.PERSONALIZED_WIDGET:var p;if((null==d?void 0:null===(p=d.usersType)||void 0===p?void 0:p.includes(s))||(null==d?void 0:d.usersType)===void 0)return(0,a.jsx)(l.OB,{agent:t,content:g,meta:d},o);return[];case i.wY.RICH_TEXT:return(0,a.jsx)(l.Ho,{content:g,meta:d},o);case i.wY.MEDIA_WIDGET:if(Object.keys(g.data).length)return(0,a.jsx)(l.Mx,{content:g,meta:d,agent:t},o);return null;case i.wY.RICH_TEXT_COL:if(Object.keys(g.data).length)return(0,a.jsx)(l.DL,{content:g,meta:d},o);return null;default:return[]}})})()})}RenderWidgets.propTypes={agent:o().string,user:o().object,userType:o().string,widgets:o().array,isTopup:o().bool,isAddon:o().bool},RenderWidgets.defaultProps={agent:i.gN.WEB,user:{},userType:i.Wg.CURIOUS,widgets:[],isTopup:!1,isAddon:!1},t.Z=RenderWidgets},23843:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return Z},default:function(){return C}});var a=n(85893),r=n(67294),s=n(45697),o=n.n(s),i=n(2664),l=n(2523),u=n(36192),c=n(309),d=n(69273),g=n(25381),m=n(2962);function OrganizationJsonLdSeo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.jsx)(m.ns,{...e})}OrganizationJsonLdSeo.propTypes={data:o().object},OrganizationJsonLdSeo.defaultProps={data:{}};var p=n(9463),f=n(32022),h=n(24558),E=n(36127);n(64402);var y=n(89947),j=n(33990),w=n(35787),b=n(88964),v=n(26027),N=n(65682),_=n(48578),O=n(21345),T=n(37767),x=n(19701);function Home(e){let t=(0,i.I0)(),[n,s]=(0,r.useState)(!1),[o,m]=(0,r.useState)(!1),{totalWidgetsData:Z=[],widgetTotalCount:C,pageRedux:I}=(0,i.v9)(e=>e.home),{userType:k,configs:A={}}=(0,i.v9)(e=>e.userInfo),{userId:R="",lastOrderShipMode:S=""}=A,{agent:L,externalMessages:P={},earliestSlotEspotData:Y,showActiveOrderWidget:D,promoOfferDataConfigs:U={},promotionsData:H={}}=(0,i.v9)(e=>e.common),{activeOrderStatusEnable:W}=Y,{notificationPanel:M={},rwdImgPathPrefix:B={}}=P,{baseUrl:z="https://cdn.dmart.in",iconsPath:G="/images/icons"}=B,{isEnabled:q="false"}=M,[X,F]=(0,r.useState)(!0),[J,K]=(0,r.useState)(!1),{homepageData:Q={},refererUrl:V="",guestData:$={},userData:ee={},customClick:et}=e,{homepage:en={}}=Q,{widgets:ea=[],context:er={},widgetCount:es=""}=en,{seoMeta:eo={}}=er,{seoTitle:ei="",seoKeywords:el="",seoDesc:eu=""}=eo,{enableOffer:ec="false",showForGuestUser:ed="false"}=U;(0,r.useEffect)(()=>{F(!1),"true"===et&&(ee&&Object.keys(ee).length?g.Z.get({},"summary"):$&&Object.keys($).length&&$.dm_token&&g.Z.get({},"summary")),async function(){p.Z.homepage(null,{page:2,size:l.vc.SIZE}).then(e=>{let{data:n}=e,{homepage:a}=n,{widgets:r=[]}=a;t((0,E.t)([{key:"widgetTotalCount",value:parseInt(es,10)},{key:"totalWidgetsData",value:[...ea,...r]},{key:"pageRedux",value:2}])),F(!1),K(!1)})}()},[]),(0,r.useEffect)(()=>{let{preferredPIN:e="",preferredArea:t,preferredCity:n}=$,{preferredPIN:a="",preferredArea:r="",preferredCity:o="",isLoggedIn:i=!1}=ee,c={},d=N.Mg.homepage_load;async function fetchpromotionsEligibility(){i&&"true"===ec?await x.Z.getPromotionsEligibilityUser():i||"true"!==ed||"true"!==ec||await x.Z.getPromotionsEligibilityGuest()}Object.keys(ee).length?((c=h.mq.homepage_load).label=a,f.Z.publish(c),d.params.selectedPincode=a,d.params.selectedArea=r,d.params.selectedCity=o,d.params.userId=R,_.Z.LogEvent(d),_.Z.SetUserProperties({selectedPincode:a,selectedArea:r,selectedCity:o,userId:R,order:""!==S?1:0})):((c=h.mq.homepage_load).label=e,f.Z.publish(c),d.params.selectedPincode=e,d.params.selectedArea=t,d.params.selectedCity=n,d.params.userId=R,_.Z.LogEvent(d),_.Z.SetUserProperties({selectedPincode:e,selectedArea:t,selectedCity:n,userId:R,order:""!==S?1:0})),L===l.gN.MOBILE&&p.Z.checkHomepage(!0),async function(){if(ee&&Object.keys(ee).length){let e=await u.Z.getEligibility("all");if(e&&(null==e?void 0:e.data)){let{data:t}=e,{addOn:n,topUp:a}=t;(null==a?void 0:a.isEligible.toLowerCase())==="true"&&(f.Z.publish(h.mq.homepage_topupinfo),_.Z.LogEvent(N.Mg.homepage_topupinfo),m(!0)),(null==n?void 0:n.isEligible.toLowerCase())==="true"&&(f.Z.publish(h.mq.homepage_addoninfo),_.Z.LogEvent(N.Mg.homepage_addoninfo),s(!0))}}}(),"true"===et&&fetchpromotionsEligibility()},[R,ec,$,ed,ee]),(0,r.useEffect)(()=>{(async function(){let{preferredPIN:e=""}=$,{preferredPIN:t="",isLoggedIn:n=!1}=ee;if("true"===q){let a=await j.Z.get("summary",{pincode:"true"===n||!0===n?t:e},{silent:!1,errorHandler:!1}),{totalUnread:r=0}=a||{};w.Z.dispatch((0,b.tP)([{key:"totalUnreadNotification",value:r||0}]))}})()},[$,q,ee]),(0,r.useEffect)(()=>{(async function(){"true"===W&&ee&&Object.keys(ee).length&&await p.Z.getActiveOrder()})()},[W,ee]);let eg={name:ei||y.b.title,type:"Corporation",url:V,description:eu||y.b.desc,logo:"".concat(z).concat(G,"/dmart_ready_logo.svg")},em=(0,r.useCallback)(()=>{let e=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement&&document.documentElement.scrollHeight||document.body.scrollHeight,a=document.documentElement.clientHeight||window.innerHeight,r=Math.ceil(e+a)>=n-l.uq[L];r&&Math.ceil(C/l.vc.SIZE)>I&&!1===X&&(e=>{let n={page:I+1,size:l.vc.SIZE},a={},{page:r=0}=n;Number(r)>2&&(a={silent:!0}),e||(F(!0),K(!0),p.Z.homepage(null,n,a).then(e=>{let{data:n}=e,{homepage:a}=n,{widgets:r=[],widgetCount:s}=a;t((0,E.t)([{key:"widgetTotalCount",value:parseInt(s,10)},{key:"totalWidgetsData",value:[...Z,...r]},{key:"pageRedux",value:I+1}])),F(!1),K(!1)}))})(!1)},[L,t,X,I,Z,C]);return(0,r.useEffect)(()=>(window.addEventListener("scroll",em),()=>{window.removeEventListener("scroll",em)}),[em]),(0,a.jsxs)("div",{className:"home-container",children:[(0,a.jsx)(d.Z,{data:{title:ei,description:eu,keywords:el,ogTitle:ei,ogDesc:eu,ogUrl:V}}),(0,a.jsx)(OrganizationJsonLdSeo,{data:eg}),(0,a.jsx)("h1",{className:"home-container-h1",children:y.b.title}),L===l.gN.WEB&&"true"===D?(0,a.jsx)(O.Z,{}):null,(0,a.jsx)(T.Z,{agent:L,variant:"homepage",promoOfferDataConfigs:U,eligiblePromotions:H}),(0,a.jsx)(c.Z,{widgets:Z,agent:L,user:ee,isAddon:n,isTopup:o,userType:k}),J?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{}),(0,a.jsx)("div",{className:"home-container-full-loader"})]}):[]]})}Home.propTypes={homepageData:o().object,refererUrl:o().string},Home.defaultProps={homepageData:{},refererUrl:""};var Z=!0,C=Home}},function(e){e.O(0,[2962,7918,625,6208,8775,5777,7726,4587,6877,9774,2888,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);